<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modal Test - Last War Alliance Manager</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            min-height: 100vh;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .test-member-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .demo-note {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-left: 4px solid #2196f3;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        .demo-note h3 {
            color: #1565c0;
            margin-top: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸŽ® Last War: Survival</h1>
            <h2>Modal Functionality Test Page</h2>
        </header>

        <main>
            <div class="test-container">
                <div class="demo-note">
                    <h3>âœ¨ Modal Demo</h3>
                    <p>This page demonstrates the new modal functionality for adding and editing members. Click the buttons below to see the modals in action!</p>
                </div>

                <!-- Action Bar -->
                <div class="action-bar">
                    <button type="button" id="add-member-btn" class="primary-action-btn">
                        <span class="btn-icon">âž•</span>
                        <span class="btn-text">Add Member</span>
                    </button>
                    <button type="button" id="import-csv-trigger-btn" class="secondary-action-btn">
                        <span class="btn-icon">ðŸ“¥</span>
                        <span class="btn-text">Import CSV</span>
                    </button>
                </div>

                <!-- CSV Import Section (Initially Hidden) -->
                <section class="csv-import-section" id="csv-import-section" style="display: none;">
                    <div class="csv-import-card">
                        <h4>ðŸ“¥ Import from CSV</h4>
                        <p class="csv-help">Upload a CSV file with format: <code>Username,Rank,Power,Level,Status,Last_Active</code></p>
                        <div class="csv-upload">
                            <input type="file" id="csv-file" accept=".csv" />
                            <button type="button" id="import-btn" class="import-btn">Preview CSV</button>
                            <button type="button" id="cancel-import-btn" class="secondary-btn">Cancel</button>
                        </div>
                    </div>
                </section>

                <!-- Sample Members -->
                <section class="members-section">
                    <h3>Sample Members</h3>
                    <div class="test-member-card">
                        <div class="member-info">
                            <div class="member-name">John Doe</div>
                            <span class="member-rank rank-R5">R5</span>
                            <span class="member-eligible eligible">âœ“ Eligible</span>
                        </div>
                        <div class="member-actions">
                            <button class="edit-btn" onclick="testEditMember('John Doe', 'R5', true)">Edit</button>
                        </div>
                    </div>

                    <div class="test-member-card">
                        <div class="member-info">
                            <div class="member-name">Jane Smith</div>
                            <span class="member-rank rank-R4">R4</span>
                            <span class="member-eligible eligible">âœ“ Eligible</span>
                        </div>
                        <div class="member-actions">
                            <button class="edit-btn" onclick="testEditMember('Jane Smith', 'R4', true)">Edit</button>
                        </div>
                    </div>

                    <div class="test-member-card">
                        <div class="member-info">
                            <div class="member-name">Bob Wilson</div>
                            <span class="member-rank rank-R3">R3</span>
                            <span class="member-eligible not-eligible">âœ— Not Eligible</span>
                        </div>
                        <div class="member-actions">
                            <button class="edit-btn" onclick="testEditMember('Bob Wilson', 'R3', false)">Edit</button>
                        </div>
                    </div>
                </section>

                <!-- Member Modal -->
                <div id="member-modal" class="modal">
                    <div class="modal-content modal-member">
                        <span class="close" id="close-member-modal">&times;</span>
                        <h3 id="modal-form-title">Add New Member</h3>
                        <form id="member-form">
                            <div class="form-group">
                                <label for="member-name">Member Name:</label>
                                <input type="text" id="member-name" required placeholder="Enter member name">
                            </div>
                            <div class="form-group">
                                <label for="member-rank">Rank:</label>
                                <select id="member-rank" required>
                                    <option value="">Select Rank</option>
                                    <option value="R5">R5</option>
                                    <option value="R4">R4</option>
                                    <option value="R3">R3</option>
                                    <option value="R2">R2</option>
                                    <option value="R1">R1</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="member-eligible" checked>
                                    <span>Eligible for Train</span>
                                </label>
                            </div>
                            <div class="button-group modal-buttons">
                                <button type="submit" id="submit-btn" class="primary-btn">Add Member</button>
                                <button type="button" id="cancel-btn" class="secondary-btn">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="theme.js"></script>
    <script>
        // Modal Elements
        const memberModal = document.getElementById('member-modal');
        const closeMemberModal = document.getElementById('close-member-modal');
        const addMemberBtn = document.getElementById('add-member-btn');
        const cancelBtn = document.getElementById('cancel-btn');
        const importCsvTriggerBtn = document.getElementById('import-csv-trigger-btn');
        const csvImportSection = document.getElementById('csv-import-section');
        const cancelImportBtn = document.getElementById('cancel-import-btn');

        // Modal Functions
        function openMemberModal(editing = false) {
            memberModal.style.display = 'flex';
            document.getElementById('member-name').focus();
        }

        function closeMemberModalFunc() {
            memberModal.style.display = 'none';
            resetMemberForm();
        }

        function resetMemberForm() {
            document.getElementById('member-form').reset();
            document.getElementById('member-eligible').checked = true;
            document.getElementById('modal-form-title').textContent = 'Add New Member';
            document.getElementById('submit-btn').textContent = 'Add Member';
        }

        // Test edit function
        function testEditMember(name, rank, eligible) {
            document.getElementById('member-name').value = name;
            document.getElementById('member-rank').value = rank;
            document.getElementById('member-eligible').checked = eligible;
            document.getElementById('modal-form-title').textContent = 'Edit Member';
            document.getElementById('submit-btn').textContent = 'Update Member';
            openMemberModal(true);
        }

        // Event Listeners
        if (addMemberBtn) {
            addMemberBtn.addEventListener('click', () => openMemberModal(false));
        }

        if (closeMemberModal) {
            closeMemberModal.addEventListener('click', closeMemberModalFunc);
        }

        if (cancelBtn) {
            cancelBtn.addEventListener('click', closeMemberModalFunc);
        }

        if (importCsvTriggerBtn && csvImportSection) {
            importCsvTriggerBtn.addEventListener('click', () => {
                csvImportSection.style.display = 'block';
                csvImportSection.scrollIntoView({ behavior: 'smooth' });
            });
        }

        if (cancelImportBtn && csvImportSection) {
            cancelImportBtn.addEventListener('click', () => {
                csvImportSection.style.display = 'none';
                document.getElementById('csv-file').value = '';
            });
        }

        // Handle form submission (demo)
        document.getElementById('member-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('member-name').value;
            const rank = document.getElementById('member-rank').value;
            const eligible = document.getElementById('member-eligible').checked;
            
            alert(`Demo Submission:\nName: ${name}\nRank: ${rank}\nEligible: ${eligible}`);
            closeMemberModalFunc();
        });

        // Close modal when clicking outside
        window.addEventListener('click', (event) => {
            if (event.target === memberModal) {
                closeMemberModalFunc();
            }
        });
    </script>
</body>
</html>
