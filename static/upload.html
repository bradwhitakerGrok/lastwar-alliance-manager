<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Member Screenshots - Last War Alliance</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“¸ Last War: Survival</h1>
            <h2>Upload Member Screenshots</h2>
            <div class="user-info">
                <span id="username-display"></span>
                <button id="logout-btn" class="logout-btn">Logout</button>
            </div>
        </header>

        <nav class="nav-menu">
            <a href="/" class="nav-link">ğŸ‘¥ Members</a>
            <a href="/train.html" class="nav-link">ğŸš‚ Train Schedule</a>
            <a href="/awards.html" class="nav-link">ğŸ† Awards</a>
            <a href="/recommendations.html" class="nav-link">â­ Recommendations</a>
            <a href="/rankings.html" class="nav-link">ğŸ“Š Rankings</a>
            <a href="/storm.html" class="nav-link">ğŸœï¸ Desert Storm</a>
            <a href="/upload.html" class="nav-link active">ğŸ“¸ Upload</a>
            <a href="/settings.html" class="nav-link">âš™ï¸ Settings</a>
            <a href="/profile.html" class="nav-link">ğŸ‘¤ Profile</a>
        </nav>

        <main>
            <section class="form-section">
                <h3>ğŸ“¤ Upload Member List Screenshots</h3>
                <p class="info-text">Upload screenshots from the game's member list. The system will automatically extract member names and ranks and update the database.</p>
                
                <div class="upload-instructions">
                    <h4>ğŸ“‹ Instructions:</h4>
                    <ol>
                        <li>Take screenshots of the member list in-game (showing member names and ranks R1-R5)</li>
                        <li>Select one or multiple screenshot files below</li>
                        <li>Click "Process Screenshots" to upload and analyze</li>
                        <li>Review the detected members and confirm changes</li>
                    </ol>
                </div>

                <form id="upload-form">
                    <div class="form-group">
                        <label for="screenshot-files">Select Screenshot Files:</label>
                        <input type="file" id="screenshot-files" accept="image/*" multiple required>
                        <span class="help-text">Supported formats: JPG, PNG, WEBP</span>
                    </div>

                    <div id="preview-section" class="preview-section" style="display: none;">
                        <h4>Selected Files:</h4>
                        <div id="file-previews" class="file-previews"></div>
                    </div>

                    <div class="button-group">
                        <button type="submit" class="primary-btn" id="upload-btn">ğŸ”„ Process Screenshots</button>
                        <button type="button" class="secondary-btn" id="clear-btn">âœ– Clear Selection</button>
                    </div>
                </form>
            </section>

            <section id="processing-section" class="form-section" style="display: none;">
                <h3>â³ Processing...</h3>
                <div class="processing-status">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <p id="processing-message">Uploading and analyzing screenshots...</p>
                </div>
            </section>

            <section id="results-section" class="form-section" style="display: none;">
                <h3>âœ… Detection Results</h3>
                <div id="results-summary" class="results-summary"></div>
                
                <div id="detected-members" class="detected-members"></div>

                <div class="button-group">
                    <button type="button" class="primary-btn" id="confirm-btn">âœ” Confirm & Update Database</button>
                    <button type="button" class="secondary-btn" id="cancel-btn">âœ– Cancel</button>
                </div>
            </section>

            <section id="update-section" class="form-section" style="display: none;">
                <h3>ğŸ“Š Update Summary</h3>
                <div id="update-results" class="update-results"></div>
                <button type="button" class="primary-btn" id="upload-more-btn">ğŸ“¤ Upload More Screenshots</button>
            </section>
        </main>
    </div>

    <script src="upload.js"></script>
</body>
</html>
